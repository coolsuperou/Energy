import{_ as N,u as $,r as i,k as V,B as D,c as k,b as s,s as r,x as u,G as E,d as C,w as R,f as h,n as x,t,l as U,H as d,g as z,h as A,o as y}from"./index-DIcO2vH9.js";const G={class:"layout-wrapper"},H={class:"sidebar-logo"},I={class:"logo-text"},M={class:"sidebar-menu"},O={class:"top-navbar"},T={class:"navbar-left"},j={class:"page-title"},q={class:"navbar-right"},F={key:0,class:"notify-badge"},J={class:"user-avatar"},K={class:"user-name"},P={class:"dropdown-menu"},Q={class:"content-wrapper"},W={__name:"BaseLayout",props:{roleName:String,messageRoute:{type:String,default:"/message"}},setup(c){const B=A(),n=$(),o=i(!1),a=i(!1),v=i(0);function p(){n.doLogout(),B.push("/login")}function m(l){l.target.closest(".user-dropdown")||(a.value=!1)}return V(()=>{document.addEventListener("click",m)}),D(()=>{document.removeEventListener("click",m)}),(l,e)=>{var b,f,_,g;const S=h("router-link"),L=h("router-view");return y(),k("div",G,[s("aside",{class:x(["sidebar",{collapsed:o.value}])},[s("div",H,[e[3]||(e[3]=s("div",{class:"logo-icon"},"⚡",-1)),r(s("span",I,"电能监控平台",512),[[u,!o.value]])]),s("nav",M,[E(l.$slots,"menu",{},void 0,!0),e[5]||(e[5]=s("div",{class:"menu-divider"},null,-1)),C(S,{to:"/login",class:"nav-link",onClick:p},{default:R(()=>[e[4]||(e[4]=s("i",{class:"bi bi-box-arrow-left"},null,-1)),r(s("span",null,"退出登录",512),[[u,!o.value]])]),_:1})])],2),s("main",{class:x(["main-wrapper",{expanded:o.value}])},[s("header",O,[s("div",T,[s("button",{class:"collapse-btn",onClick:e[0]||(e[0]=w=>o.value=!o.value)},[...e[6]||(e[6]=[s("i",{class:"bi bi-list"},null,-1)])]),s("h5",j,t(c.roleName),1)]),s("div",q,[s("button",{class:"notify-btn",onClick:e[1]||(e[1]=w=>l.$router.push(c.messageRoute))},[e[7]||(e[7]=s("i",{class:"bi bi-bell"},null,-1)),v.value>0?(y(),k("span",F,t(v.value),1)):U("",!0)]),s("div",{class:"user-dropdown",onClick:e[2]||(e[2]=w=>a.value=!a.value)},[s("div",J,t(((f=(b=d(n).user)==null?void 0:b.name)==null?void 0:f.charAt(0))||"U"),1),s("span",K,t((_=d(n).user)==null?void 0:_.name)+" · "+t((g=d(n).user)==null?void 0:g.department),1),e[9]||(e[9]=s("i",{class:"bi bi-chevron-down"},null,-1)),r(s("div",P,[s("a",{class:"dropdown-item",onClick:p},[...e[8]||(e[8]=[s("i",{class:"bi bi-box-arrow-left"},null,-1),z("退出登录 ",-1)])])],512),[[u,a.value]])])])]),s("div",Q,[C(L)])],2)])}}},Y=N(W,[["__scopeId","data-v-a72d4510"]]);export{Y as B};
