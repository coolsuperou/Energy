import{g as y}from"./application-Dl1OK2DR.js";import{r as p,k as f,c as o,b as s,t as l,g,d as r,w as c,f as w,l as v,F as E,m as h,o as e,n as x}from"./index-DIcO2vH9.js";const D={class:"workshop-home"},P={class:"stat-cards"},C={class:"stat-card"},N={class:"stat-info"},T={class:"stat-value"},A={class:"stat-card"},V={class:"stat-info"},M={class:"stat-value"},S={class:"stat-card"},q={class:"stat-info"},O={class:"stat-value"},R={class:"stat-trend muted"},B={class:"stat-card"},I={class:"stat-info"},L={class:"stat-value"},W={key:0,class:"stat-trend down"},z={key:1,class:"stat-trend muted"},F={class:"content-grid"},G={class:"card"},J={class:"card-body"},$={class:"action-grid"},j={class:"card"},H={class:"card-header"},K={class:"text-muted"},Q={class:"card"},U={class:"card-header"},X={class:"card-body p-0"},Y={class:"data-table"},Z={class:"fw-medium"},ss={key:0},ts={class:"card"},as={class:"card-body"},ls={key:0,class:"notice-item warning"},is={key:1,class:"empty-notice"},ds={__name:"Index",setup(ns){const i=p({todayEnergy:"1,256",currentPower:"89.5",pendingApply:3,pendingApproval:2,alerts:1}),b=p(""),u=p([]);function m(a){return{PENDING:"badge-pending",APPROVED:"badge-approved",REJECTED:"badge-rejected",COMPLETED:"badge-approved"}[a]||"badge-pending"}function _(a){return{PENDING:"待审批",APPROVED:"已批准",REJECTED:"已拒绝",COMPLETED:"已完成"}[a]||a}async function k(){try{const a=await y({page:1,size:5});a&&a.code===200&&a.data&&(u.value=a.data.records||a.data||[])}catch(a){console.warn("加载申请列表失败，使用空数据",a),u.value=[]}}return f(()=>{const a=new Date;b.value=`${a.getHours()}:${String(a.getMinutes()).padStart(2,"0")}`,k()}),(a,t)=>{const d=w("router-link");return e(),o("div",D,[s("div",P,[s("div",C,[t[2]||(t[2]=s("div",{class:"stat-icon blue"},[s("i",{class:"bi bi-lightning-charge"})],-1)),s("div",N,[s("div",T,l(i.value.todayEnergy),1),t[0]||(t[0]=s("div",{class:"stat-label"},"今日能耗 (kWh)",-1)),t[1]||(t[1]=s("div",{class:"stat-trend up"},[s("i",{class:"bi bi-arrow-up"}),g(" 较昨日 +5.2%")],-1))])]),s("div",A,[t[5]||(t[5]=s("div",{class:"stat-icon green"},[s("i",{class:"bi bi-speedometer2"})],-1)),s("div",V,[s("div",M,l(i.value.currentPower),1),t[3]||(t[3]=s("div",{class:"stat-label"},"当前功率 (kW)",-1)),t[4]||(t[4]=s("div",{class:"stat-trend muted"},"实时监测中",-1))])]),s("div",S,[t[7]||(t[7]=s("div",{class:"stat-icon orange"},[s("i",{class:"bi bi-file-earmark-text"})],-1)),s("div",q,[s("div",O,l(i.value.pendingApply),1),t[6]||(t[6]=s("div",{class:"stat-label"},"待处理申请",-1)),s("div",R,l(i.value.pendingApproval)+"个待审批",1)])]),s("div",B,[t[9]||(t[9]=s("div",{class:"stat-icon red"},[s("i",{class:"bi bi-exclamation-triangle"})],-1)),s("div",I,[s("div",L,l(i.value.alerts),1),t[8]||(t[8]=s("div",{class:"stat-label"},"异常通知",-1)),i.value.alerts>0?(e(),o("div",W,"需要关注")):(e(),o("div",z,"暂无异常"))])])]),s("div",F,[s("div",G,[t[14]||(t[14]=s("div",{class:"card-header"},"快捷操作",-1)),s("div",J,[s("div",$,[r(d,{to:"/workshop/apply",class:"quick-action"},{default:c(()=>[...t[10]||(t[10]=[s("div",{class:"action-icon blue"},[s("i",{class:"bi bi-plus-circle"})],-1),s("span",null,"新建申请",-1)])]),_:1}),r(d,{to:"/workshop/energy",class:"quick-action"},{default:c(()=>[...t[11]||(t[11]=[s("div",{class:"action-icon green"},[s("i",{class:"bi bi-graph-up"})],-1),s("span",null,"能耗统计",-1)])]),_:1}),r(d,{to:"/workshop/message",class:"quick-action"},{default:c(()=>[...t[12]||(t[12]=[s("div",{class:"action-icon orange"},[s("i",{class:"bi bi-tools"})],-1),s("span",null,"故障报修",-1)])]),_:1}),r(d,{to:"/workshop/message",class:"quick-action"},{default:c(()=>[...t[13]||(t[13]=[s("div",{class:"action-icon purple"},[s("i",{class:"bi bi-lightbulb"})],-1),s("span",null,"节能建议",-1)])]),_:1})])])]),s("div",j,[s("div",H,[t[15]||(t[15]=s("span",null,"今日功率曲线",-1)),s("small",K,"更新于 "+l(b.value),1)]),t[16]||(t[16]=s("div",{class:"card-body"},[s("div",{class:"chart-placeholder"},[s("i",{class:"bi bi-graph-up"}),s("span",null,"功率趋势图表")])],-1))]),s("div",Q,[s("div",U,[t[18]||(t[18]=s("span",null,"最近申请",-1)),r(d,{to:"/workshop/apply",class:"card-link"},{default:c(()=>[...t[17]||(t[17]=[g("查看全部 →",-1)])]),_:1})]),s("div",X,[s("table",Y,[t[20]||(t[20]=s("thead",null,[s("tr",null,[s("th",null,"申请编号"),s("th",null,"申请时段"),s("th",null,"预计功率"),s("th",null,"状态")])],-1)),s("tbody",null,[(e(!0),o(E,null,h(u.value,n=>(e(),o("tr",{key:n.id},[s("td",Z,l(n.applicationNo),1),s("td",null,l(n.applyDate)+" "+l(n.startTime)+"-"+l(n.endTime),1),s("td",null,l(n.power)+" kW",1),s("td",null,[s("span",{class:x(["badge-status",m(n.status)])},l(_(n.status)),3)])]))),128)),u.value.length===0?(e(),o("tr",ss,[...t[19]||(t[19]=[s("td",{colspan:"4",class:"text-center text-muted py-4"},"暂无申请记录",-1)])])):v("",!0)])])])]),s("div",ts,[t[24]||(t[24]=s("div",{class:"card-header"},"异常通知",-1)),s("div",as,[i.value.alerts>0?(e(),o("div",ls,[...t[21]||(t[21]=[s("i",{class:"bi bi-exclamation-triangle-fill"},null,-1),s("div",{class:"notice-content"},[s("h6",null,"用电超限预警"),s("p",null,"当前功率已达到申请上限的90%，请注意控制"),s("small",null,"10分钟前")],-1)])])):v("",!0),t[23]||(t[23]=s("div",{class:"notice-item info"},[s("i",{class:"bi bi-info-circle-fill"}),s("div",{class:"notice-content"},[s("h6",null,"系统维护通知"),s("p",null,"系统将于今晚22:00-23:00进行维护升级"),s("small",null,"2小时前")])],-1)),i.value.alerts===0?(e(),o("div",is,[...t[22]||(t[22]=[s("i",{class:"bi bi-check-circle"},null,-1),s("span",null,"暂无异常通知",-1)])])):v("",!0)])])])])}}};export{ds as default};
